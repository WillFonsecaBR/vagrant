#!/bin/bash
echo "========  | INSTALANDO SUDO  | ========"
# SE O SUDO NÃO ESTIVER INSTALADO
apt install -y sudo 

echo "========== | INSTALANDO PYTHON | =========="
sudo apt install -y python3

echo "========== | INSTALANDO ANSIBLE | =========="
sudo apt install -y ansible

echo "========= | CONFIGURANDO HOSTS | ========="
cat <<EOT >> /etc/hosts
192.168.56.2 lab01-ubuntu-maq-01
192.168.56.3 lab01-ubuntu-maq-02
192.168.56.4 lab01-debian-maq-03
192.168.56.5 lab01-rocklinux-maq-04
EOT

echo "========= | CONFIGURANDO SSH | ========="
touch /home/vagrant/.ssh/id_rsa
touch /home/vagrant/.ssh/id_rsa.pub
cat <<EOT >> /home/vagrant/.ssh/id_rsa
-----BEGIN OPENSSH PRIVATE KEY-----
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
-----END OPENSSH PRIVATE KEY-----
EOT
cat <<EOT >> /home/vagrant/.ssh/id_rsa.pub
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQCwKVg48nkRwbmGKcEUBOi+vP0lQhergy8oLjWSCIaHe2D1zOjrT4CQwbOrQtBIAO4AaDlMhY2NJAlPIjzx4traV9q4/fiH2etjUs+u/U37M0SgQyfBqFR6tJNfUV4RdklU27Ok8fS07CfBdCFaC/4X/HBW3M6tBYU8/OfJChlbyClQmLr6E2QUuHlVqo3cXd0OthUen76r5zS/PaTILUzXgWNfsuqAUHJJHY2M6wklKHYS0XgllCP4jfRUFU8lUwxrqkStd7TNLiYSkJqIuqKVoYKDIgIGPCGLOYtN7naV1aa99S+fofDrSh+K1LAB0FHvcajzKOgqssuqWEJuZh1AafoZe5Tqa1B8iIkzqmUCmrDm1qW1A5WgQ1IyicXKdheDPOrIKbo6hq0gYc4zcmFbylNY6Q3eSEafBeDrIlAr8R9CTCc20WUbdjXjvFyvStwfNOrb0psuhnrg1d3GlJZ5YoBKFSlo9r0Msn+wm7GeD1PrjLttMYGJ31KGWB9XYfk= vagrant@lab01-ubuntu-maq-01
EOT

echo "========= | CONFIGURANDO SUDORS | ========="
sudo apt install -y sshpass
cat <<EOT >> /etc/sudoers
# ELEVAÇÃO DE PRIVILEGIOS PARA USER VAGRANT
vagrant ALL=(ALL:ALL) NOPASSWD:ALL 
EOT